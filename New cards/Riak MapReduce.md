Алгоритма MapReduce по своей сути состоит из двух этапов:
1. Распределение посредством map - список данных преобразуется в новый список посредством функции map(). 
2. Редукция посредством reduce - полученный список преобразуется в одно или несколько скалярных значений с помощью функции reduce(). 

MapReduce, по сути, прямая противоположность привычному способу извлечения и обработки данных. Если мы используем реляционную базу данных, то перед тем как что-то посчитать нам необходимо извлечь данные, загрузить их в оперативную память и затем посчитать. На самом деле можно выполнять агрегирование данных на уровне базы, либо извлекать данные с помощью генератора по одной записи, но самый примитивный способ - извлечь данные, загрузив их в оперативную память, а затем посчитать. Примитивный способ приемлем на небольшом количестве данных, но с их ростом такой метод начинает работать очень медленно. 

MapReduce делает все наоборот. Заместо того, чтобы данные от базы, каркас MapReduce отправляет на все узлы, где работают серверы базы данных, алгоритм, который те должны выполнить и вернуть результат. Каждому серверному объекту "распределяется" группа данных с общим ключом, а сервер "редуцирует" полученные данные в одно значение. 
![[Pasted image 20231109085725.png]]

В случае Riak, серверы базы данных отвечают за распределение и редукцию на каждом узле. Редуцированные значения передаются на следующий круг, где какой-то сервер (обычно отправляющий запрос) редуцирует их дальше - до тех пор, пока не будет получен конечный результат, который уже передаются запросившему клиенту. 

Такая инверсия потока выполнения - действенный способ исполнять сложные алгоритмы локально на каждом сервере и возвращать вызывающему серверу небольшой по размеру результат. 
***Быстрее отправить алгоритм к данным, чем данные к алгоритму***. 

Для исполнения алгоритмов через MapReduce в Riak используется JavaScript или Erlang. JavaScript по своей сути представляет просто текстовую строку, поэтому важно правильно экранировать специальные символы. 
Стоит заметить, что в последующих версиях Riak будет удалена возможность использовать JavaScript в качестве языка написания функций.


___
```

```
___
Зачем это нужно: [[]] 
Примеры применения: [[]] 
Основные ошибки: [[]]
___
Relations: [[Riak]] 
Tags: #code
References: [[Семь баз данных]] 
Query: 