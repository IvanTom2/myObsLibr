Цикл событий необходим для низкоуровневых операций. Цикл событий - это очередь задач. Каждая задача является оберткой над какой-либо сопрограммой. 

Сопрограмма может приостановить выполнение, встретив операцию ввода-вывода и дать циклу событий возможность выполнять другие задачи. 

Создавая цикл событий, мы создаем пустую очередь задач. Затем мы добавляем в эту очередь какие-либо задачи для выполнения. На каждой итерации цикл проверяет, есть ли в очереди задача, и если есть, то она выполняется, пока не встретит операцию ввода-вывода. В момент встречи операции ввода-вывода задача приостанавливается и мы просим операционную систему наблюдать за ее сокетами. На каждой итерации также проверяется, завершилась ли какая-нибудь операция ввода-вывода: если да, то ожидавшие ее завершения задачи пробуждаются и им предоставляется возможность продолжить работу. 

Управляя циклом событий, его нужно вызвать. Кроме того, при окончании асинхронных операций его необходимо закрыть. 

Для выполнения функции на следующей итерации цикла необходимо вызвать метод цикла событий `loop.call_soon()`. 

Вызвать цикл событий можно несколькими способами:
1. `asyncio.get_running_loop()` - позволяет получить запущенный цикл событий. Рекомендуется получать цикл событий именно этим способом, потому что в случае, если цикл событий не существует, возникнет исключение. Это поможет избежать ошибок.
2. `asyncio.get_event_loop()` - позволяет получить запущенный цикл событий или создать новый, если в рамках задачи цикл событий не существует. 

___
```
import asyncio

loop = asyncio.new_event_loop()
loop.run_until_complete(func())
loop = asnycio.get_running_loop()
loop.call_soon(new_func())
loop.close()
```

___
Relations: [[asyncio Python]] 
Tags: #code 
References: [[Asyncio (книга)]] 
Query: 