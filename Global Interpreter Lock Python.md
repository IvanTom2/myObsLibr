Global Interpreter Lock (GIL) - глобальная блокировка интерпретатора, которая не позволяет Python-процессу исполнять более одной команды байт-кода в каждый момент времени. Это означает, что даже если имеется несколько потоков на многоядерной машине, интерпретатор сможет в каждый момент времени исполнять только один поток, содержащий написанный на Python код. 

Многопроцессорные приложения могут выполнять конкурентно несколько команд байт-кода, потому что у каждого Python-процесса своя собственная GIL. 

***Зачем это нужно?*** 
Интерпретатор CPython ***не является потокобезопасным***. Это означает, что если два или более потоков модифицируют разделяемую переменную, то ее конечное состояние может оказаться неожиданным, поскольку зависит от порядка доступа к переменной со стороны потоков. Эта ситуация называется ***состояние гонки***. Состояния гонки возникают, когда два потока одновременно обращаются к одному объекту Python. 

![[Pasted image 20230910104958.png]]

***Когда освобождается GIL?*** 
GIL ***не удерживается постоянно***. GIL освобождается на время операций ввода-вывода. Это позволяет ***эффективно использовать потоки для выполнения операций ввода-вывода***, но ***не для счетных операций***. 



___
Relations: [[Python]] 
Tags: #theory 
References: [[asyncio Python]] 
Query: 