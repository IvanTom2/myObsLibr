Самый главный вопрос здесь стоит в том, чтобы понять как произвести вычитание на битовом уровне, доступном компьютеру. 
Предположим, мы ходим получить разность десятичных чисел 253 и 176. Начиная решение с правой крайней пары чисел, можно заметить, что 3 больше 6 - для этого нам необходимо занимать у пятерки десятичное число, т.е. производить операцию заимствования. И так для всех последующих операций. 
$$-\frac{253}{176}$$
Сложно заставить группу логических вентилей следовать такой логике. Поэтому будем использовать операцию ***вычитания без заимствования***. Числа, участвующие в операции вычитания, называются **уменьшаемое** и **вычитаемое**. Вычитаемое вычитается из уменьшаемого - результатом является разность. 
Для того, чтобы выполнить вычитание без заимствования, необходимо сначала вычесть вычитаемое из 999, а не из уменьшаемого. 999 используется, т.к. числа, участвующие в операции, состоят из трех цифр (если были бы четырехзначные числа, то использовалось бы 9999 и так далее). 
Операция вычитания числа из строки девяток передает нам результат, который называется ***дополнением до девяти***. Так, для 176 дополнением до девяти является 823, а для 823 дополнение до девяти работает в обратную сторону и равняется 176. Вне зависимости от значения вычитаемого вычисление его дополнения до девяти никогда не требует заимствования. 
$$-\frac{999}{176}=823$$
После операции дополнения до девяти к получившемуся результату необходимо добавить уменьшаемое. 
$$+\frac{253}{823}=1076$$
В конце необходимо прибавить к результату единицу и вычесть 1000 (1000 вычитается в данном случае, т.к. используется трехзначные числа в операции вычитания).
$$1076+1-1000=77$$

В случае, если уменьшаемое меньше, чем вычитаемое, то алгоритм несколько отличается. Для примера возьмем 176 - 253. На первых этапах алгоритм схож, мы получаем дополнение до девяти для числа 253 = 746. Затем прибавляем к нему уменьшаемое: 746 + 176 = 922. В конце алгоритм меняется - заместо того, чтобы прибавлять 1 и вычитать 1000 из 922, мы вычитаем 922 из 999 (т.е. меняем местами), а для результата просто меняем знак. Так необходимо сделать, потому что операцию 922 - 999 нельзя произвести без заимствования. 

Такой алгоритм применим и к двоичным числам, и он работает даже проще, нежели с десятичными. Исходная задача 253 - 176 в двоичной записи:
$$-\frac{11111101}{10110000}$$
Операция дополнения до девяти меняется на операцию дополнения до единицы:
$$-\frac{11111111}{10110000}=01001111$$
Стоит заметить, что для дополнения до единицы необязательно использовать вычитание, а можно просто заменить его на инверсию - т.е. поменять сигнал с положительного на отрицательного (например, инвертором). 
Далее мы прибавляем к дополнению до единицы уменьшаемое:
$$+\frac{11111101}{01001111}=101001100$$
Прибавляем к результату единицу:
$$+\frac{101001100}{000000001}=101001101$$
Вычитаем 100000000 (что соответствует 256):
$$-\frac{101001101}{100000000}=001001101$$
Результат эквивалентен 77. 

Если мы вычитаем **большее из меньшего**, то алгоритм немного меняется. Решим задачу вычитания 176 - 253. 
$$-\frac{10110000}{11111101}$$
Вычтем вычитаемое из дополнения до единицы - т.е. просто инвертируем вычитаемое.
$$-\frac{11111111}{11111101}=00000010$$
Теперь прибавим к уменьшаемому получившееся дополнение до единицы.
$$+\frac{10110000}{00000010}=10110010$$
Теперь нужно из результата вычесть 11111111, но это нельзя сделать без заимствования. Заместо этого можно вычесть из 11111111 наш результат и затем сделать его отрицательным путем умножения на -1. Другими словами мы инвертируем число и умножаем его на минус единицу, т.е. меняем знак. 
$$-1\times[-\frac{11111111}{10110010}]=-01001101$$

В двоичной системе не принято использовать знаки, т.к. мы находимся в двоичной системе - предпочтительнее всё сводить к нулям и единицам. Таким образом, конкретно "-" никогда не встретить - заместо этого используется позиция самого старшего разряда, которой принято отвечать за знак. Это удобно, потому что дополнительного разряда полностью хватает, чтобы точно описать как положительные числа из необходимого диапазона, так и отрицательные. 

Такая система позволяет не только записывать отрицательные числа, но и вычитать их без явного вычитания, а через сложение. Так как мы получаем замкнутый круг чисел, которые из одного состояния могут переходить в другое, мы можем их вычитать путем ***дополнения до двух***. Дополнение до двух - это как дополнение до единицы, но с прибавлением единицы = т.е. мы инвертируем число и прибавляем к нему единицу. Очевидно, что с помощью инвертирования позиция верхнего разряда изменится - соответственно, число поменяет знак. 

На примере 8-битного числа.
![[Pasted image 20230517065719.png]]
___
Links: [[Примитивные вычислительные системы]]
Tags:
References: